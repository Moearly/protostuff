#summary protobuf serialization and deserialization, howto, usage
#labels Featured

The single dependency:
 * protostuff-api - 22kb
 * protostuff-core - 33kb

= java_bean =

Generate code via [http://protostuff.googlecode.com/files/protostuff-compiler-1.0.0.M2-jarjar.jar protostuff-compiler].

{{{foo.proto}}}
{{{
package foo;

option optimize_for = LITE_RUNTIME;
option java_package = "com.example.foo";

message Person {
  required int32 id = 1;
  optional string name = 2;
  optional string motto = 3 [default="When the cat is away, the mouse is alone!"];
  enum Gender {
    MALE = 1;
    FEMALE = 2;
  }
  optional Gender gender = 4;
}
}}}

== Serialization ==
{{{
Person person = new Person(1);
person.setName("John Doe");
person.setGender(Gender.MALE);
}}}

* writing to {{{java.io.OutputStream}}} *
{{{
OutputStream out;
IOUtil.writeTo(out, person);
}}}

* writing to {{{java.io.Writer}}} *
{{{
Writer writer;
IOUtil.writeTo(writer, person);
}}}

* writing to a byte array *
{{{
byte[] data = IOUtil.toByteArray(person);
}}}

== Deserialization ==

* merging from {{{java.io.InputStream}}}*
{{{
Person person = new Person();
InputStream in;
IOUtil.mergeFrom(in, person);
}}}

* merging from {{{java.io.Reader}}} *
{{{
Person person = new Person();
Reader reader;
IOUtil.mergeFrom(reader, person);
}}}

* merging from a byte array *
{{{
Person person = new Person();
byte[] data;
IOUtil.mergeFrom(data, person); 
}}}